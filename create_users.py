import os
from neo4j import GraphDatabase
import hashlib
from dotenv import load_dotenv

load_dotenv()
user = os.getenv('NEO4J_USER')
password = os.getenv('NEO4J_PASS')
url = os.getenv('NEO4J_URL')

driver = GraphDatabase.driver(url, auth=(user, password))

def sha256_hash(input_string):
    input_bytes = input_string.encode('utf-8')
    hash_object = hashlib.sha256()
    hash_object.update(input_bytes)
    hashed_string = hash_object.hexdigest()
    return hashed_string

with driver.session() as session:

    # query = f'''MERGE (n: User {{username: "James", password: "{sha256_hash('password123')}"}}) return n'''
    # query = f'''MERGE (n: User {{username: "OtherGuy", password: "{sha256_hash('password1234')}"}}) return n'''
    query = f'''MERGE (n: User {{username: "AnotherGuy", password: "{sha256_hash('password12345')}"}}) return n'''
    result = session.run(query)

